add_custom_library(${PROJECT_NAME}
  SOURCES
    lockable.hpp
    projname.cpp
    projname.hpp
  DEPENDS
    Threads::Threads
    Boost::system
    Boost::date_time
    Boost::diagnostic_definitions
    Boost::disable_autolinking
    Boost::dynamic_linking
    $<$<TARGET_EXISTS:boost_throw_exception>:boost_throw_exception>
)
if(NOT MSVC)
    target_compile_options(${PROJECT_NAME}
      PUBLIC
        -Wno-error=zero-as-null-pointer-constant
    )
endif()

add_custom_executable(${PROJECT_NAME}
  SOURCES
    projname_main.cpp
  DEPENDS
    ${PROJECT_NAME}
    $<$<TARGET_EXISTS:boost_throw_exception>:boost_throw_exception>
)

if(BUILD_TESTING)
    add_custom_test(${PROJECT_NAME}_test
      SOURCES
        lockable_test.cpp
        projname_test.cpp
      DEPENDS
        ${PROJECT_NAME}
        $<$<TARGET_EXISTS:boost_throw_exception>:boost_throw_exception>
        gtest_main
      EXTRA_ARGS
        --gtest_color=yes
    )
endif()
