projname_add_library(${PROJECT_NAME}
  SOURCES
    lockable.hpp
    projname.cpp
    projname.hpp
  DEPENDS
    Threads::Threads
    asio::asio
    Boost::date_time
    Boost::diagnostic_definitions
    Boost::disable_autolinking
    Boost::dynamic_linking
)

projname_add_executable(${PROJECT_NAME}_tool
  SOURCES
    projname_main.cpp
  DEPENDS
    ${PROJECT_NAME}
)

projname_add_pymodule(py${PROJECT_NAME}
  SOURCES
    projname_py.cpp
  DEPENDS
    ${PROJECT_NAME}
)

if(BUILD_TESTING)
    projname_add_test(${PROJECT_NAME}_test
      SOURCES
        lockable_test.cpp
        projname_test.cpp
      DEPENDS
        ${PROJECT_NAME}
        gtest_main
      EXTRA_ARGS
        --gtest_color=yes
    )

    if(BUILD_BENCHMARKS)
        projname_add_test(${PROJECT_NAME}_benchmark
          SOURCES
            lockable_benchmark.cpp
          DEPENDS
            ${PROJECT_NAME}
            benchmark_main
        )
    endif()
endif()
