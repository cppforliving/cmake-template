set(TEST_NAME example_unit_test)
set(SOURCE_FILES example_unit_test.cpp CoroutinesTS.cpp)
add_executable(${TEST_NAME} ${SOURCE_FILES})
target_link_libraries(${TEST_NAME} GTest::Main GTest::GTest example)
if(MSVC AND BUILD_SHARED_LIBS)
    target_compile_definitions(${TEST_NAME} PUBLIC -DGTEST_LINKED_AS_SHARED_LIBRARY=1)
endif()
add_test(NAME ${TEST_NAME} COMMAND ${TEST_NAME}
    --gtest_color=yes --gtest_output=xml:${TEST_NAME}.xml)
set_tests_properties(${TEST_NAME} PROPERTIES LABELS unit)
